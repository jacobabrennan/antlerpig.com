                </div>
                <footer id="main_footer">
                </footer>
            </div>
        <!-- Global Scripts -->
        <script src="https://login.persona.org/include.js"></script>
        <script src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
        <core[persona]>
        <script>
            var signinLinks = document.getElementsByClassName('signin');
            var signoutLinks = document.getElementsByClassName('signout');
            for(var linkIndex = 0; linkIndex < signinLinks.length; linkIndex++){
                var indexedLink = signinLinks[linkIndex];
                indexedLink.onclick = function() { navigator.id.request(); };
            }
            for(var linkIndex = 0; linkIndex < signoutLinks.length; linkIndex++){
                var indexedLink = signoutLinks[linkIndex];
                indexedLink.onclick = function() { navigator.id.logout(); };
            }
            
navigator.id.watch({
    loggedInUser: persona_email,
    onlogin: function(assertion) {
        // A user has logged in! Here you need to:
        // 1. Send the assertion to your backend for verification and to create a session.
        // 2. Update your UI.
        $.ajax({ /* <-- This example uses jQuery, but you can use whatever you'd like */
            type: 'POST',
            url: '/persona/login', // This is a URL on your website.
            data: {assertion: assertion},
            success: function(res, status, xhr) {
                window.location.reload();
                // When user logs in, replace signin link with signout link.
                /*var topStrip = document.getElementById('top_strip');
                var signinLink = document.getElementById('signin');
                if(signinLink){
                    topStrip.removeChild(signinLink);
                    var signoutLink = document.createElement('a');
                    var emailLabel = document.createElement('span');
                    emailLabel.textContent = 'Logged in as '+JSON.parse(res).email;
                    topStrip.appendChild(emailLabel);
                    topStrip.appendChild(signoutLink);
                    // Must set outerHTML after adding to DOM so as to not upset Chrome.
                    signoutLink.outerHTML = '<a id="signout" href="#" class="persona-button orange"><span>Sign Out</span></a>';
                    signoutLink = document.getElementById('signout');
                    signoutLink.addEventListener('click', function (event){
                        navigator.id.logout();
                    }, false)
                }*/
            },
            error: function(xhr, status, err) {
                console.log('Error');
                navigator.id.logout();
                alert("Login failure: " + err);
            }
        });
    },
    onlogout: function() {
        // A user has logged out! Here you need to:
        // Tear down the user's session by redirecting the user or making a call to your backend.
        // Also, make sure loggedInUser will get set to null on the next page load.
        // (That's a literal JavaScript null. Not false, 0, or undefined. null.)
        $.ajax({
            type: 'POST',
            url: '/persona/logout', // This is a URL on your website.
            success: function(res, status, xhr) { window.location.reload(); },
            error: function(xhr, status, err) { alert("Logout failure: " + err); }
        });
    }
});
            
        </script>
        </body>
    </html>